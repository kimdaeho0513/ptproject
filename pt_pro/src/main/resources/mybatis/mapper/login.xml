<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="loginMapper">
	<select id="selectLogin" parameterType="memDto"
		resultType="memDto">
		SELECT USERSCODE,USERID,password as pw
		      ,name,birth,phone as phone
		      ,email,gender,roles,hidden,deleted
		FROM USERS
		WHERE USERID = #{userid}
		AND password = #{pw}
		AND deleted = 'N'
		AND roles = #{roles}
	</select>
	<select id="selectId" parameterType="memDto" resultType="memDto">
		SELECT
		USERID, name, phone as phone
		FROM USERS
		WHERE name = #{name}
		AND phone = #{phone}
		AND deleted = 'N'
	</select>
	<select id="selectPw" parameterType="memDto" resultType="memDto">
		SELECT
		name,USERID,email,password as pw
		FROM USERS
		WHERE name = #{name}
		AND email = #{email}
		AND USERID = #{userid}
		AND deleted = 'N'
	</select>
	<update id="updatePw" parameterType="memDto">
		 UPDATE USERS
    		SET password = #{pw}
  		  WHERE userid = #{userid}
	</update>
	<insert id="insertMem" parameterType="memDto">
		INSERT INTO USERS
		(USERID,PASSWORD,NAME,BIRTH,phone,EMAIL,GENDER)
		VALUES
		(#{userid},#{pw},#{name},#{birth},#{phone},#{email},#{gender})

	</insert>
</mapper>
