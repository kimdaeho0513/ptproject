<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="loginMapper">
	<select id="selectLogin" parameterType="memDto"
		resultType="memDto">
		SELECT userscode as num,userid as id,password as pw
		      ,name,birth,phone
		      ,email,gender,roles as role,hidden,deleted
		FROM users
		WHERE userid = #{id}
		AND password = #{pw}
		AND deleted = 'N'
	</select>
	<select id="selectId" parameterType="memDto" resultType="memDto">
		SELECT
		userid as id, name, phone
		FROM users
		WHERE name = #{name}
		AND phone = #{phone}
		AND deleted = 'N'
	</select>
	<select id="selectPw" parameterType="memDto" resultType="memDto">
		SELECT
		name,userid as id,email,password as pw
		FROM users
		WHERE name = #{name}
		AND email = #{email}
		AND userid = #{id}
		AND deleted = 'N'
	</select>
	<update id="updatePw" parameterType="memDto">
		 UPDATE users
    		SET password = #{pw}
  		  WHERE userid = #{id}
	</update>
	<insert id="insertMem" parameterType="memDto">
		INSERT INTO users
		(USERID,PASSWORD,NAME,BIRTH,PHONE,EMAIL,GENDER)
		VALUES
		(#{id},#{pw},#{name},#{birth},#{phone},#{email},#{gender})
	</insert>
</mapper>
